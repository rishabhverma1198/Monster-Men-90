
{
  "entities": {
    "Product": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Product",
      "type": "object",
      "description": "Represents a product available for sale in the MonserMens90 store.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the product."
        },
        "name": {
          "type": "string",
          "description": "The name of the product."
        },
        "category": {
          "type": "string",
          "description": "The category the product belongs to (Men, Women, etc.)."
        },
        "images": {
          "type": "array",
          "description": "An array of URLs pointing to the product images.",
          "items": {
            "type": "string"
          }
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the product."
        },
        "price": {
          "type": "number",
          "description": "The price of the product."
        },
        "tags": {
          "type": "array",
          "description": "An array of tags associated with the product for search.",
          "items": {
            "type": "string"
          }
        },
        "slug": {
          "type": "string",
          "description": "A URL-friendly slug for the product."
        },
        "status": {
            "type": "string",
            "description": "The status of the product.",
            "enum": ["active", "inactive"]
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the product was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the product was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "category",
        "images",
        "description",
        "price",
        "tags",
        "slug",
        "status",
        "createdAt",
        "updatedAt"
      ]
    },
    "Variant": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Variant",
      "type": "object",
      "description": "Represents a specific variant of a product (e.g., size).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the variant."
        },
        "productId": {
          "type": "string",
          "description": "Reference to Product. (Relationship: Product 1:N Variant)"
        },
        "size": {
          "type": "string",
          "description": "The size of the variant (S, M, L, XL, XXL)."
        },
        "stock": {
          "type": "number",
          "description": "The current stock level for this variant."
        },
        "price": {
          "type": "number",
          "description": "The price for this variant."
        }
      },
      "required": [
        "id",
        "productId",
        "size",
        "stock",
        "price"
      ]
    },
    "OrderLead": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "OrderLead",
      "type": "object",
      "description": "Represents an order placed by a user.",
      "properties": {
        "orderId": {
          "type": "string",
          "description": "Unique identifier for the order."
        },
        "name": {
          "type": "string",
          "description": "The name of the user who placed the order."
        },
        "phone": {
          "type": "string",
          "description": "The phone number of the user who placed the order."
        },
        "items": {
          "type": "array",
          "description": "An array of items in the order. Each item should include the productId, quantity and size.",
          "items": {
            "type": "string"
          }
        },
        "status": {
          "type": "string",
          "description": "The current status of the order (Pending, Confirmed, Packed, Shipped, Delivered)."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the order was placed.",
          "format": "date-time"
        }
      },
      "required": [
        "orderId",
        "name",
        "phone",
        "items",
        "status",
        "createdAt"
      ]
    },
    "Admin": {
      "title": "Admin",
      "type": "object",
      "description": "A document that grants admin privileges to a user.",
      "properties": {
        "role": {
          "type": "string",
          "const": "admin"
        }
      },
      "required": ["role"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "emailLink"
    ],
    "users": [
      {
        "email": "admin.monsermens90@gmail.com",
        "password": "password123",
        "customClaims": {
          "admin": true
        }
      }
    ]
  },
  "firestore": {
    "rules": "rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    function isSignedIn() {\n      return request.auth != null;\n    }\n\n    function isAdmin() {\n      return isSignedIn() && exists(/databases/$(database)/documents/admins/$(request.auth.uid));\n    }\n\n    match /products/{productId} {\n      allow read: if true;\n      allow write: if isAdmin();\n\n      match /variants/{variantId} {\n        allow read: if true;\n        allow write: if isAdmin();\n      }\n    }\n\n    match /orders_leads/{orderId} {\n      allow create: if true;\n      allow read, update, delete: if isAdmin();\n    }\n\n    match /admins/{uid} {\n      allow read, write: if isAdmin();\n    }\n  }\n}\n",
    "collections": [
      {
        "name": "products",
        "schema": {
          "$ref": "#/entities/Product"
        },
        "subcollections": [
          {
            "name": "variants",
            "schema": {
              "$ref": "#/entities/Variant"
            }
          }
        ]
      },
      {
        "name": "orders_leads",
        "schema": {
          "$ref": "#/entities/OrderLead"
        }
      },
      {
        "name": "admins",
        "schema": {
          "$ref": "#/entities/Admin"
        }
      }
    ]
  }
}
    
