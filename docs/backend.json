{
  "entities": {
    "Product": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Product",
      "type": "object",
      "description": "Represents a product available for sale in the MonserMens90 e-commerce system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the product."
        },
        "name": {
          "type": "string",
          "description": "The name of the product."
        },
        "category": {
          "type": "string",
          "description": "The category the product belongs to (e.g., Men, Women)."
        },
        "images": {
          "type": "array",
          "description": "An array of URLs pointing to the product images.",
          "items": {
            "type": "string"
          }
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the product."
        },
        "price": {
          "type": "number",
          "description": "The price of the product."
        },
        "tags": {
          "type": "array",
          "description": "An array of tags associated with the product for search purposes.",
          "items": {
            "type": "string"
          }
        },
        "slug": {
          "type": "string",
          "description": "A URL-friendly slug for the product."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp of when the product was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp of when the product was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "category",
        "images",
        "description",
        "price",
        "tags",
        "slug",
        "createdAt",
        "updatedAt"
      ]
    },
    "ProductVariant": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ProductVariant",
      "type": "object",
      "description": "Represents a specific variant of a product (e.g., size) and its stock level.",
      "properties": {
        "productId": {
          "type": "string",
          "description": "Reference to the Product. (Relationship: Product 1:N ProductVariant)"
        },
        "size": {
          "type": "string",
          "description": "The size of the product variant (e.g., S, M, L, XL, XXL)."
        },
        "stock": {
          "type": "number",
          "description": "The current stock level of this product variant."
        },
        "price": {
          "type": "number",
          "description": "Price specific to size."
        }
      },
      "required": [
        "productId",
        "size",
        "stock",
        "price"
      ]
    },
    "Order": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Order",
      "type": "object",
      "description": "Represents an order placed by a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the order."
        },
        "orderId": {
          "type": "string",
          "description": "The order ID (e.g., MM90-XXXXXX)."
        },
        "name": {
          "type": "string",
          "description": "The name of the customer who placed the order."
        },
        "phone": {
          "type": "string",
          "description": "The phone number of the customer who placed the order."
        },
        "items": {
          "type": "array",
          "description": "An array of items in the order. Each item will likely contain a productId and quantity.",
          "items": {
            "type": "string"
          }
        },
        "status": {
          "type": "string",
          "description": "The status of the order (e.g., Pending, Confirmed, Packed, Shipped, Delivered)."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp of when the order was placed.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "orderId",
        "name",
        "phone",
        "items",
        "status",
        "createdAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "products/{productId}",
        "definition": {
          "entityName": "Product",
          "schema": {
            "$ref": "#/backend/entities/Product"
          },
          "description": "Stores product details, including name, category, images, description, price, and tags.",
          "params": [
            {
              "name": "productId",
              "description": "Unique identifier for the product."
            }
          ]
        }
      },
      {
        "path": "products/{productId}/variants/{variantId}",
        "definition": {
          "entityName": "ProductVariant",
          "schema": {
            "$ref": "#/backend/entities/ProductVariant"
          },
          "description": "Stores product variants (e.g., sizes) and their associated stock levels and prices. The variant ID is the size (S,M,L,...).",
          "params": [
            {
              "name": "productId",
              "description": "Unique identifier for the product."
            },
            {
              "name": "variantId",
              "description": "The product variant size (S, M, L, XL, XXL)."
            }
          ]
        }
      },
      {
        "path": "orders_leads/{orderId}",
        "definition": {
          "entityName": "Order",
          "schema": {
            "$ref": "#/backend/entities/Order"
          },
          "description": "Stores order details including name, phone, items, status, and createdAt. The orderId is a unique identifier for the order (MM90-XXXXXX).",
          "params": [
            {
              "name": "orderId",
              "description": "Unique identifier for the order."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to support the MonserMens90 e-commerce application, focusing on product presentation, order placement, and admin management. Key considerations include: \n\n1.  **Authorization Independence:** Since there are no user accounts (besides the admin), ownership isn't applicable to general users. Orders are linked to user information (name, phone) and the admin manages them.  There is no need to denormalize authorization data, because access to collections is not dependent on the user.\n2.  **Structural Segregation:** The `products` collection stores product details, with a subcollection `variants` to handle size-specific stock and pricing. `orders_leads` stores order information. Segregation ensures that access rules (if needed in the future) can be applied distinctly to product data and order data.\n3.  **Access Modeling:** Products can be listed by anyone, and there are no user-specific permissions needed for access. Only admin has write access.\n4. **QAPs**: The structure supports listing products and orders. The `products` collection allows listing all products for the storefront. The `orders_leads` collection enables the admin to view and manage all orders.  Since there are no user accounts, there are no QAPs to consider regarding user-specific access.\n\nThis design prioritizes simplicity given the limited authorization needs of the application."
  }
}